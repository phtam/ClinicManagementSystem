@model List<ClinicManagementSystem.EF.Order>

@{
    ViewBag.Title = "My Order";
    ViewBag.Header = "My Order";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="cart_area section-padding40">
    <div class="container">
        <h1 style="font-size:27px; padding-bottom:20px">My Order</h1>
        <table id="tbl_Orders" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>
                        Username
                    </th>
                    <th>
                        Fullname
                    </th>
                    <th>
                        Created Date
                    </th>
                    <th>
                        Delivered Date
                    </th>
                    <th>
                        Delivered Address
                    </th>
                    <th>
                        Status
                    </th>
                    <th>
                        Note
                    </th>
                    <th>
                        Payment
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>
                            @Html.DisplayFor(modelItem => item.Username)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Customer.FullName)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.CreateDate)
                        </td>
                        <td>
                            @if (item.DeliveredDate == null)
                            {
                                if (item.Status == 0)
                                {
                                    <span class="badge badge-primary">Processing</span>
                                }
                                else if (item.Status == 1)
                                {
                                    <span class="badge badge-warning">Shipping</span>
                                }
                                else if (item.Status == 2)
                                {
                                    <span class="badge badge-success">Delivered</span>
                                }
                                else
                                {
                                    <span class="badge badge-danger">Canceled</span>
                                }
                            }
                            else
                            {
                                @Html.DisplayFor(modelItem => item.DeliveredDate)
                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.DeliveredAddress)
                        </td>
                        <td>
                            @if (item.Status == 0)
                            {
                                <span class="badge badge-primary">Processing</span>
                            }
                            else if (item.Status == 1)
                            {
                                <span class="badge badge-warning">Shipping</span>
                            }
                            else if (item.Status == 2)
                            {
                                <span class="badge badge-success">Delivered</span>
                            }
                            else
                            {
                                <span class="badge badge-danger">Canceled</span>
                            }
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Note)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.Payment.PaymentName)
                        </td>

                        <td class="project-actions text-right">
                            <a class="btn btn-primary btn-sm btn-block" href="@Url.Action("OrderDetail", "Profile", new { id = item.OrderID })">
                                <i class="fas fa-eye">
                                </i>
                                Detail
                            </a>
                        </td>
                    </tr>
                }

            </tbody>
        </table>
    </div>
</section>

@section ClientScript
{
    <link href="~/Asset/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
    <link href="~/Asset/plugins/datatables-responsive/css/responsive.bootstrap4.min.css" rel="stylesheet" />
    <script src="~/Asset/plugins/datatables/jquery.dataTables.min.js"></script>
    <script src="~/Asset/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/Asset/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
    <script src="~/Asset/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
    <script>
        $("#tbl_Orders").DataTable({
            "responsive": true,
            "autoWidth": false,
            "aoColumns": [
                null,
                null,
                null,
                null,
                null,
                null,
                null,
                null,
                { sWidth: '80px' }
            ]
        });

        $('#print').click(function () {
            window.print();
            return false;
        });

    </script>
}